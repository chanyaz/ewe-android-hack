<?xml version="1.0" encoding="UTF-8"?>
<project name="ExpediaBookings_test_custom_rules" default="debug">

    <!-- Fixes duplicate class files for ant builds of test projects -->
    <target name="-post-compile">
        <delete verbose="true">
            <fileset dir="${out.classes.absolute.dir}" includes="${library.paths}" />
        </delete>
        <path id="out.dex.jar.input.ref">
            <fileset dir="${jar.libs.absolute.dir}" includes="*.jar" />
        </path>
    </target>

    <target name="unit" depends="-setup">
        <exec executable="${adb}" failonerror="true">
            <arg value="shell" />
            <arg value="am" />
            <arg value="instrument" />
            <arg value="-w" />
            <arg value="-r" />
            <arg value="-e" />
            <arg value="package" />
            <arg value="com.expedia.bookings.test.tests.unit" />
            <arg value="-e" />
            <arg value="debug" />
            <arg value="false" />
            <arg value="com.expedia.bookings.test/com.zutubi.android.junitreport.JUnitReportTestRunner" />
        </exec>
    </target>
</project>
